{"ast":null,"code":"import _slicedToArray from \"/Users/hey/Desktop/Untitled/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/hey/Desktop/Untitled/src/context/reportsCtx.js\";\nimport React, { createContext, useEffect, useState } from \"react\";\nexport const reportsContext = createContext();\n\nconst ReportsContextProvider = ({\n  children\n}) => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        projects = _useState2[0],\n        setProjects = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        gateways = _useState4[0],\n        setGateways = _useState4[1];\n\n  const _useState5 = useState([]),\n        _useState6 = _slicedToArray(_useState5, 2),\n        reports = _useState6[0],\n        setReports = _useState6[1];\n\n  const _useState7 = useState(0),\n        _useState8 = _slicedToArray(_useState7, 2),\n        totalAmount = _useState8[0],\n        setTotalAmount = _useState8[1];\n\n  const formData = {\n    projectId: \"\",\n    gatewayId: \"\",\n    from: \"\",\n    to: \"\"\n  };\n  useEffect(() => {\n    fetch(\"http://178.63.13.157:8090/mock-api/api/projects\").then(res => res.json()).then(result => setProjects(result.data)).catch(err => {\n      console.log(err);\n    });\n    fetch(\"http://178.63.13.157:8090/mock-api/api/gateways\").then(res => res.json()).then(result => setGateways(result.data)).catch(err => {\n      console.log(err);\n    });\n    fetch(\"http://178.63.13.157:8090/mock-api/api/report\", {\n      method: \"POST\",\n      body: JSON.stringify(formData),\n      headers: {\n        \"content-type\": \"application/json\"\n      }\n    }).then(res => res.json()).then(result => {\n      setReports(result.data);\n      return result.data;\n    }).then(data => setTotalAmount(Math.round(data.reduce((prev, curr) => prev + curr.amount, 0) * 100) / 100)).catch(err => console.log(err));\n  }, []);\n  return React.createElement(reportsContext.Provider, {\n    value: {\n      projects,\n      setProjects,\n      gateways,\n      setGateways,\n      reports,\n      setReports,\n      totalAmount\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, children);\n};\n\nexport default ReportsContextProvider;","map":{"version":3,"sources":["/Users/hey/Desktop/Untitled/src/context/reportsCtx.js"],"names":["React","createContext","useEffect","useState","reportsContext","ReportsContextProvider","children","projects","setProjects","gateways","setGateways","reports","setReports","totalAmount","setTotalAmount","formData","projectId","gatewayId","from","to","fetch","then","res","json","result","data","catch","err","console","log","method","body","JSON","stringify","headers","Math","round","reduce","prev","curr","amount"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,SAA/B,EAA0CC,QAA1C,QAA0D,OAA1D;AAEA,OAAO,MAAMC,cAAc,GAAGH,aAAa,EAApC;;AAEP,MAAMI,sBAAsB,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAkB;AAAA,oBACfH,QAAQ,CAAC,EAAD,CADO;AAAA;AAAA,QACxCI,QADwC;AAAA,QAC9BC,WAD8B;;AAAA,qBAEfL,QAAQ,CAAC,EAAD,CAFO;AAAA;AAAA,QAExCM,QAFwC;AAAA,QAE9BC,WAF8B;;AAAA,qBAGjBP,QAAQ,CAAC,EAAD,CAHS;AAAA;AAAA,QAGxCQ,OAHwC;AAAA,QAG/BC,UAH+B;;AAAA,qBAITT,QAAQ,CAAC,CAAD,CAJC;AAAA;AAAA,QAIxCU,WAJwC;AAAA,QAI3BC,cAJ2B;;AAM/C,QAAMC,QAAQ,GAAG;AACfC,IAAAA,SAAS,EAAE,EADI;AAEfC,IAAAA,SAAS,EAAE,EAFI;AAGfC,IAAAA,IAAI,EAAE,EAHS;AAIfC,IAAAA,EAAE,EAAE;AAJW,GAAjB;AAOAjB,EAAAA,SAAS,CAAC,MAAM;AACdkB,IAAAA,KAAK,mDAAL,CACGC,IADH,CACSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EADjB,EAEGF,IAFH,CAESG,MAAD,IAAYhB,WAAW,CAACgB,MAAM,CAACC,IAAR,CAF/B,EAGGC,KAHH,CAGUC,GAAD,IAAS;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,KALH;AAOAP,IAAAA,KAAK,mDAAL,CACGC,IADH,CACSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EADjB,EAEGF,IAFH,CAESG,MAAD,IAAYd,WAAW,CAACc,MAAM,CAACC,IAAR,CAF/B,EAGGC,KAHH,CAGUC,GAAD,IAAS;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,KALH;AAOAP,IAAAA,KAAK,kDAAkD;AACrDU,MAAAA,MAAM,EAAE,MAD6C;AAErDC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAelB,QAAf,CAF+C;AAGrDmB,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB;AAH4C,KAAlD,CAAL,CAKGb,IALH,CAKSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EALjB,EAMGF,IANH,CAMSG,MAAD,IAAY;AAChBZ,MAAAA,UAAU,CAACY,MAAM,CAACC,IAAR,CAAV;AACA,aAAOD,MAAM,CAACC,IAAd;AACD,KATH,EAUGJ,IAVH,CAUSI,IAAD,IACJX,cAAc,CACZqB,IAAI,CAACC,KAAL,CAAWX,IAAI,CAACY,MAAL,CAAY,CAACC,IAAD,EAAOC,IAAP,KAAgBD,IAAI,GAAGC,IAAI,CAACC,MAAxC,EAAgD,CAAhD,IAAqD,GAAhE,IACE,GAFU,CAXlB,EAgBGd,KAhBH,CAgBUC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAhBlB;AAiBD,GAhCQ,EAgCN,EAhCM,CAAT;AAkCA,SACE,oBAAC,cAAD,CAAgB,QAAhB;AACE,IAAA,KAAK,EAAE;AACLpB,MAAAA,QADK;AAELC,MAAAA,WAFK;AAGLC,MAAAA,QAHK;AAILC,MAAAA,WAJK;AAKLC,MAAAA,OALK;AAMLC,MAAAA,UANK;AAOLC,MAAAA;AAPK,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAWGP,QAXH,CADF;AAeD,CA9DD;;AAgEA,eAAeD,sBAAf","sourcesContent":["import React, { createContext, useEffect, useState } from \"react\";\n\nexport const reportsContext = createContext();\n\nconst ReportsContextProvider = ({ children }) => {\n  const [projects, setProjects] = useState([]);\n  const [gateways, setGateways] = useState([]);\n  const [reports, setReports] = useState([]);\n  const [totalAmount, setTotalAmount] = useState(0);\n\n  const formData = {\n    projectId: \"\",\n    gatewayId: \"\",\n    from: \"\",\n    to: \"\",\n  };\n\n  useEffect(() => {\n    fetch(`http://178.63.13.157:8090/mock-api/api/projects`)\n      .then((res) => res.json())\n      .then((result) => setProjects(result.data))\n      .catch((err) => {\n        console.log(err);\n      });\n\n    fetch(`http://178.63.13.157:8090/mock-api/api/gateways`)\n      .then((res) => res.json())\n      .then((result) => setGateways(result.data))\n      .catch((err) => {\n        console.log(err);\n      });\n\n    fetch(`http://178.63.13.157:8090/mock-api/api/report`, {\n      method: \"POST\",\n      body: JSON.stringify(formData),\n      headers: { \"content-type\": \"application/json\" },\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        setReports(result.data);\n        return result.data;\n      })\n      .then((data) =>\n        setTotalAmount(\n          Math.round(data.reduce((prev, curr) => prev + curr.amount, 0) * 100) /\n            100\n        )\n      )\n      .catch((err) => console.log(err));\n  }, []);\n\n  return (\n    <reportsContext.Provider\n      value={{\n        projects,\n        setProjects,\n        gateways,\n        setGateways,\n        reports,\n        setReports,\n        totalAmount,\n      }}\n    >\n      {children}\n    </reportsContext.Provider>\n  );\n};\n\nexport default ReportsContextProvider;\n"]},"metadata":{},"sourceType":"module"}